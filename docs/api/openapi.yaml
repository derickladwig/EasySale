openapi: 3.0.3
info:
  title: EasySale POS API
  description: |
    EasySale is a white-label, configuration-driven point-of-sale solution designed to adapt to any retail business type.
    
    ## Authentication
    The API uses two authentication methods:
    - **Cookie Authentication**: httpOnly cookie (`auth_token`) set after successful login
    - **Bearer Token**: JWT token in Authorization header for API clients
    
    ## Multi-Tenant Architecture
    All requests are scoped to a tenant. The tenant context is extracted from the authenticated user's JWT token.
    
    ## Offline-First Design
    The system supports offline operation with local SQLite storage and background synchronization.
  version: 1.0.0
  contact:
    name: EasySale Support
  license:
    name: Proprietary

servers:
  - url: http://localhost:7945
    description: Development server
  - url: https://api.easysale.local
    description: Production server (LAN)

tags:
  - name: Health
    description: Health check and system status endpoints
  - name: Authentication
    description: User authentication and session management
  - name: Capabilities
    description: System capabilities and feature detection
  - name: Configuration
    description: System and tenant configuration
  - name: Theme
    description: Theme and branding management
  - name: Fresh Install
    description: Fresh installation and setup endpoints
  - name: Dashboard
    description: Dashboard statistics and metrics
  - name: Products
    description: Product catalog management
  - name: Customers
    description: Customer management
  - name: Users
    description: User management
  - name: Inventory
    description: Inventory management
  - name: Layaway
    description: Layaway management
  - name: Work Orders
    description: Work order management
  - name: Commissions
    description: Commission rules and tracking
  - name: Loyalty
    description: Loyalty programs and pricing tiers
  - name: Credit
    description: Credit accounts and store credit
  - name: Gift Cards
    description: Gift card management
  - name: Promotions
    description: Promotions and group markdowns
  - name: Stores
    description: Store and station management
  - name: Audit
    description: Audit logging
  - name: Reporting
    description: Reports and analytics
  - name: Sync
    description: Synchronization operations
  - name: Conflicts
    description: Conflict resolution
  - name: Alerts
    description: Alert management
  - name: Barcodes
    description: Barcode generation and validation
  - name: Files
    description: File management
  - name: Units
    description: Unit conversion
  - name: Backups
    description: Backup and restore operations
  - name: Google Drive
    description: Google Drive integration
  - name: Settings
    description: System settings
  - name: Feature Flags
    description: Feature flag management
  - name: WooCommerce
    description: WooCommerce integration
  - name: QuickBooks
    description: QuickBooks integration
  - name: OAuth
    description: OAuth token management
  - name: Integrations
    description: External integrations
  - name: Webhooks
    description: Webhook endpoints
  - name: Network
    description: Network configuration

security:
  - cookieAuth: []
  - bearerAuth: []

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: auth_token
      description: httpOnly cookie containing JWT token
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token in Authorization header

  schemas:
    # Common Response Schemas
    Error:
      type: object
      properties:
        error:
          type: string
          description: Error message
        message:
          type: string
          description: Detailed error message
        code:
          type: string
          description: Error code
      required:
        - error

    ValidationError:
      type: object
      properties:
        field:
          type: string
          description: Field that failed validation
        message:
          type: string
          description: Validation error message
        code:
          type: string
          description: Validation error code
          enum: [REQUIRED, INVALID_VALUE, INVALID_FORMAT, OUT_OF_RANGE]
      required:
        - field
        - message

    ValidationErrors:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: '#/components/schemas/ValidationError'
      required:
        - errors

    Success:
      type: object
      properties:
        message:
          type: string
          description: Success message
      required:
        - message

    PaginatedResponse:
      type: object
      properties:
        total:
          type: integer
          description: Total number of items
        page:
          type: integer
          description: Current page number
        page_size:
          type: integer
          description: Number of items per page
        has_more:
          type: boolean
          description: Whether there are more pages

    # Authentication Schemas
    LoginRequest:
      type: object
      properties:
        username:
          type: string
          description: Username
          example: admin
        password:
          type: string
          format: password
          description: Password
          example: password123
      required:
        - username
        - password

    LoginResponse:
      type: object
      properties:
        token:
          type: string
          description: JWT token (also set as httpOnly cookie)
        user:
          $ref: '#/components/schemas/UserResponse'
        expires_at:
          type: string
          format: date-time
          description: Token expiration time
      required:
        - token
        - user
        - expires_at

    UserResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        display_name:
          type: string
          nullable: true
        role:
          type: string
          enum: [admin, manager, cashier, specialist, inventory_clerk, technician]
        first_name:
          type: string
          nullable: true
        last_name:
          type: string
          nullable: true
        store_id:
          type: string
          nullable: true
        station_policy:
          type: string
          enum: [any, specific, none]
        station_id:
          type: string
          nullable: true
        permissions:
          type: array
          items:
            type: string
      required:
        - id
        - tenant_id
        - username
        - email
        - role
        - station_policy
        - permissions

    CreateUserRequest:
      type: object
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          minLength: 8
        display_name:
          type: string
          nullable: true
        role:
          type: string
          enum: [admin, manager, cashier, specialist, inventory_clerk, technician]
        first_name:
          type: string
          nullable: true
        last_name:
          type: string
          nullable: true
        store_id:
          type: string
          nullable: true
          description: Required for POS roles (cashier, manager, specialist, technician)
        station_policy:
          type: string
          enum: [any, specific, none]
          default: any
        station_id:
          type: string
          nullable: true
          description: Required when station_policy is 'specific'
      required:
        - username
        - email
        - password
        - role

    # Product Schemas
    Product:
      type: object
      properties:
        id:
          type: string
          format: uuid
        sku:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        category:
          type: string
        subcategory:
          type: string
          nullable: true
        unit_price:
          type: number
          format: double
        cost:
          type: number
          format: double
        quantity_on_hand:
          type: number
          format: double
        reorder_point:
          type: number
          format: double
          nullable: true
        attributes:
          type: object
          additionalProperties: true
        parent_id:
          type: string
          nullable: true
        barcode:
          type: string
          nullable: true
        barcode_type:
          type: string
          nullable: true
        images:
          type: array
          items:
            type: string
        tenant_id:
          type: string
        store_id:
          type: string
        is_active:
          type: boolean
        sync_version:
          type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        profit_margin:
          type: number
          format: double
        profit_amount:
          type: number
          format: double

    CreateProductRequest:
      type: object
      properties:
        sku:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        category:
          type: string
        subcategory:
          type: string
          nullable: true
        unit_price:
          type: number
          format: double
        cost:
          type: number
          format: double
        quantity_on_hand:
          type: number
          format: double
          default: 0
        reorder_point:
          type: number
          format: double
          nullable: true
        attributes:
          type: object
          additionalProperties: true
        parent_id:
          type: string
          nullable: true
        barcode:
          type: string
          nullable: true
        barcode_type:
          type: string
          nullable: true
        images:
          type: array
          items:
            type: string
        store_id:
          type: string
      required:
        - sku
        - name
        - category
        - unit_price
        - cost
        - store_id

    UpdateProductRequest:
      type: object
      properties:
        sku:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        category:
          type: string
        subcategory:
          type: string
          nullable: true
        unit_price:
          type: number
          format: double
        cost:
          type: number
          format: double
        quantity_on_hand:
          type: number
          format: double
        reorder_point:
          type: number
          format: double
          nullable: true
        attributes:
          type: object
          additionalProperties: true
        barcode:
          type: string
          nullable: true
        barcode_type:
          type: string
          nullable: true
        images:
          type: array
          items:
            type: string
        is_active:
          type: boolean

    ProductSearchRequest:
      type: object
      properties:
        query:
          type: string
        category:
          type: string
        filters:
          type: object
          additionalProperties: true
        page:
          type: integer
          default: 0
        page_size:
          type: integer
          default: 50
          maximum: 100
        sort_by:
          type: string
        sort_order:
          type: string
          enum: [asc, desc]

    ProductSearchResponse:
      allOf:
        - $ref: '#/components/schemas/PaginatedResponse'
        - type: object
          properties:
            products:
              type: array
              items:
                $ref: '#/components/schemas/Product'

    BulkOperationRequest:
      type: object
      properties:
        operation:
          type: string
          enum: [update, delete, import, export]
        product_ids:
          type: array
          items:
            type: string
        updates:
          type: object
          additionalProperties: true
        import_data:
          type: array
          items:
            type: object
      required:
        - operation

    # Customer Schemas
    Customer:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
        name:
          type: string
        email:
          type: string
          format: email
          nullable: true
        phone:
          type: string
          nullable: true
        pricing_tier:
          type: string
          enum: [retail, wholesale, vip, contractor]
        loyalty_points:
          type: integer
        store_credit:
          type: number
          format: double
        credit_limit:
          type: number
          format: double
          nullable: true
        credit_balance:
          type: number
          format: double
        store_id:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateCustomerRequest:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
          format: email
          nullable: true
        phone:
          type: string
          nullable: true
        pricing_tier:
          type: string
          enum: [retail, wholesale, vip, contractor]
          default: retail
        store_id:
          type: string
          nullable: true
      required:
        - name

    UpdateCustomerRequest:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
          format: email
          nullable: true
        phone:
          type: string
          nullable: true
        pricing_tier:
          type: string
          enum: [retail, wholesale, vip, contractor]
        loyalty_points:
          type: integer
        store_credit:
          type: number
          format: double
        credit_limit:
          type: number
          format: double

    # Layaway Schemas
    Layaway:
      type: object
      properties:
        id:
          type: string
          format: uuid
        customer_id:
          type: string
        status:
          type: string
          enum: [active, completed, cancelled, overdue]
        total_amount:
          type: number
          format: double
        deposit_amount:
          type: number
          format: double
        balance_due:
          type: number
          format: double
        due_date:
          type: string
          format: date-time
          nullable: true
        items:
          type: array
          items:
            $ref: '#/components/schemas/LayawayItem'
        payments:
          type: array
          items:
            $ref: '#/components/schemas/LayawayPayment'
        created_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
          nullable: true

    LayawayItem:
      type: object
      properties:
        id:
          type: string
        product_id:
          type: string
        quantity:
          type: number
          format: double
        unit_price:
          type: number
          format: double
        total_price:
          type: number
          format: double

    LayawayPayment:
      type: object
      properties:
        id:
          type: string
        amount:
          type: number
          format: double
        payment_method:
          type: string
        payment_date:
          type: string
          format: date-time
        employee_id:
          type: string
          nullable: true

    CreateLayawayRequest:
      type: object
      properties:
        customer_id:
          type: string
        items:
          type: array
          items:
            type: object
            properties:
              product_id:
                type: string
              quantity:
                type: number
                format: double
              unit_price:
                type: number
                format: double
            required:
              - product_id
              - quantity
              - unit_price
        deposit_amount:
          type: number
          format: double
        due_date:
          type: string
          format: date-time
          nullable: true
        store_id:
          type: string
          nullable: true
      required:
        - customer_id
        - items
        - deposit_amount

    CreateLayawayPaymentRequest:
      type: object
      properties:
        amount:
          type: number
          format: double
        payment_method:
          type: string
        employee_id:
          type: string
          nullable: true
      required:
        - amount
        - payment_method

    # Work Order Schemas
    WorkOrder:
      type: object
      properties:
        id:
          type: string
          format: uuid
        customer_id:
          type: string
        status:
          type: string
          enum: [pending, in_progress, completed, cancelled]
        description:
          type: string
        estimated_completion:
          type: string
          format: date-time
          nullable: true
        lines:
          type: array
          items:
            $ref: '#/components/schemas/WorkOrderLine'
        created_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
          nullable: true

    WorkOrderLine:
      type: object
      properties:
        id:
          type: string
        line_type:
          type: string
          enum: [labor, part, service]
        description:
          type: string
        quantity:
          type: number
          format: double
        unit_price:
          type: number
          format: double
        product_id:
          type: string
          nullable: true

    CreateWorkOrderRequest:
      type: object
      properties:
        customer_id:
          type: string
        description:
          type: string
        estimated_completion:
          type: string
          format: date-time
          nullable: true
        store_id:
          type: string
          nullable: true
      required:
        - customer_id
        - description

    # Store and Station Schemas
    Store:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        address:
          type: string
          nullable: true
        timezone:
          type: string
        currency:
          type: string
        is_active:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateStoreRequest:
      type: object
      properties:
        name:
          type: string
        address:
          type: string
          nullable: true
        timezone:
          type: string
          default: UTC
        currency:
          type: string
          default: USD
      required:
        - name

    Station:
      type: object
      properties:
        id:
          type: string
          format: uuid
        store_id:
          type: string
        name:
          type: string
        ip_address:
          type: string
          nullable: true
        is_active:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateStationRequest:
      type: object
      properties:
        store_id:
          type: string
        name:
          type: string
        ip_address:
          type: string
          nullable: true
      required:
        - store_id
        - name

    # Gift Card Schemas
    GiftCard:
      type: object
      properties:
        id:
          type: string
        code:
          type: string
        initial_balance:
          type: number
          format: double
        current_balance:
          type: number
          format: double
        status:
          type: string
          enum: [active, redeemed, expired, cancelled]
        issued_at:
          type: string
          format: date-time
        expires_at:
          type: string
          format: date-time
          nullable: true

    IssueGiftCardRequest:
      type: object
      properties:
        amount:
          type: number
          format: double
        customer_id:
          type: string
          nullable: true
        expires_at:
          type: string
          format: date-time
          nullable: true
      required:
        - amount

    # Promotion Schemas
    Promotion:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        discount_type:
          type: string
          enum: [percentage, fixed, buy_x_get_y]
        discount_value:
          type: number
          format: double
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
          nullable: true
        is_active:
          type: boolean
        conditions:
          type: object
          additionalProperties: true
        created_at:
          type: string
          format: date-time

    CreatePromotionRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        discount_type:
          type: string
          enum: [percentage, fixed, buy_x_get_y]
        discount_value:
          type: number
          format: double
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
          nullable: true
        conditions:
          type: object
          additionalProperties: true
      required:
        - name
        - discount_type
        - discount_value
        - start_date

    # Sync Schemas
    SyncQueueItem:
      type: object
      properties:
        id:
          type: string
        entity_type:
          type: string
        entity_id:
          type: string
        operation:
          type: string
          enum: [create, update, delete]
        status:
          type: string
          enum: [pending, in_progress, completed, failed]
        retry_count:
          type: integer
        created_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
          nullable: true

    SyncConflict:
      type: object
      properties:
        id:
          type: string
        entity_type:
          type: string
        entity_id:
          type: string
        local_version:
          type: object
        remote_version:
          type: object
        resolution:
          type: string
          enum: [pending, local_wins, remote_wins, merged]
          nullable: true
        created_at:
          type: string
          format: date-time

    # Alert Schemas
    Alert:
      type: object
      properties:
        id:
          type: string
          format: uuid
        type:
          type: string
        severity:
          type: string
          enum: [info, warning, error, critical]
        message:
          type: string
        acknowledged:
          type: boolean
        acknowledged_at:
          type: string
          format: date-time
          nullable: true
        acknowledged_by:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time

    # Backup Schemas
    Backup:
      type: object
      properties:
        id:
          type: string
          format: uuid
        filename:
          type: string
        size_bytes:
          type: integer
          format: int64
        backup_type:
          type: string
          enum: [full, incremental, differential]
        status:
          type: string
          enum: [pending, in_progress, completed, failed]
        created_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
          nullable: true

    BackupSettings:
      type: object
      properties:
        auto_backup_enabled:
          type: boolean
        backup_frequency:
          type: string
          enum: [hourly, daily, weekly]
        retention_days:
          type: integer
        backup_path:
          type: string
        cloud_backup_enabled:
          type: boolean

    # Audit Log Schemas
    AuditLog:
      type: object
      properties:
        id:
          type: string
          format: uuid
        user_id:
          type: string
        action:
          type: string
        entity_type:
          type: string
        entity_id:
          type: string
        old_values:
          type: object
          nullable: true
        new_values:
          type: object
          nullable: true
        ip_address:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time

    # Dashboard Schemas
    DashboardStats:
      type: object
      properties:
        total_sales_today:
          type: number
          format: double
        total_transactions_today:
          type: integer
        average_transaction_value:
          type: number
          format: double
        top_selling_products:
          type: array
          items:
            type: object
            properties:
              product_id:
                type: string
              name:
                type: string
              quantity_sold:
                type: number
              revenue:
                type: number
        low_stock_alerts:
          type: integer
        pending_layaways:
          type: integer

    # Capabilities Schemas
    Capabilities:
      type: object
      properties:
        version:
          type: string
        features:
          type: object
          properties:
            layaway:
              type: boolean
            work_orders:
              type: boolean
            commissions:
              type: boolean
            loyalty:
              type: boolean
            gift_cards:
              type: boolean
            woocommerce:
              type: boolean
            quickbooks:
              type: boolean
        modules:
          type: array
          items:
            type: string

    # Theme Schemas
    Theme:
      type: object
      properties:
        mode:
          type: string
          enum: [light, dark, system]
        accent:
          type: string
        contrast:
          type: string
          enum: [normal, high]
        logo:
          type: string
          nullable: true
        company_name:
          type: string
          nullable: true

    # Network Configuration Schemas
    NetworkConfig:
      type: object
      properties:
        hostname:
          type: string
        ip_address:
          type: string
        subnet_mask:
          type: string
        gateway:
          type: string
        dns_servers:
          type: array
          items:
            type: string
        dhcp_enabled:
          type: boolean


paths:
  # Health Check Endpoints
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: Check if the API server is running
      operationId: healthCheck
      security: []
      responses:
        '200':
          description: Server is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  timestamp:
                    type: string
                    format: date-time
    head:
      tags:
        - Health
      summary: Health check (HEAD)
      description: Check if the API server is running (HEAD request)
      operationId: healthCheckHead
      security: []
      responses:
        '200':
          description: Server is healthy

  # Capabilities Endpoints
  /api/capabilities:
    get:
      tags:
        - Capabilities
      summary: Get system capabilities
      description: Returns the system capabilities and enabled features
      operationId: getCapabilities
      security: []
      responses:
        '200':
          description: System capabilities
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Capabilities'

  /api/capabilities/config:
    get:
      tags:
        - Capabilities
      summary: Get config capabilities
      description: Returns configuration-related capabilities
      operationId: getConfigCapabilities
      security: []
      responses:
        '200':
          description: Config capabilities
          content:
            application/json:
              schema:
                type: object

  /api/capabilities/meta:
    get:
      tags:
        - Capabilities
      summary: Get meta capabilities
      description: Returns metadata capabilities
      operationId: getMetaCapabilities
      security: []
      responses:
        '200':
          description: Meta capabilities
          content:
            application/json:
              schema:
                type: object

  # Tenant Setup Endpoints
  /api/tenant/setup-status:
    get:
      tags:
        - Configuration
      summary: Check setup status
      description: Check if the initial setup is complete
      operationId: getSetupStatus
      security: []
      responses:
        '200':
          description: Setup status
          content:
            application/json:
              schema:
                type: object
                properties:
                  setup_complete:
                    type: boolean
                  first_run:
                    type: boolean

  /api/tenant/setup-complete:
    post:
      tags:
        - Configuration
      summary: Mark setup as complete
      description: Mark the initial setup as complete
      operationId: markSetupComplete
      security: []
      responses:
        '200':
          description: Setup marked as complete
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # Theme Endpoints
  /api/login-theme/version:
    get:
      tags:
        - Theme
      summary: Get login theme version
      description: Get the current login theme version for cache invalidation
      operationId: getLoginThemeVersion
      security: []
      responses:
        '200':
          description: Login theme version
          content:
            application/json:
              schema:
                type: object
                properties:
                  version:
                    type: string

  /api/theme:
    get:
      tags:
        - Theme
      summary: Get theme
      description: Get the current theme configuration
      operationId: getTheme
      security: []
      responses:
        '200':
          description: Theme configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Theme'
    post:
      tags:
        - Theme
      summary: Set theme
      description: Update the theme configuration
      operationId: setTheme
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Theme'
      responses:
        '200':
          description: Theme updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Theme'

  # Configuration Endpoints
  /api/config:
    get:
      tags:
        - Configuration
      summary: Get configuration
      description: Get the current system configuration
      operationId: getConfig
      security: []
      responses:
        '200':
          description: System configuration
          content:
            application/json:
              schema:
                type: object

  /api/config/brand:
    get:
      tags:
        - Configuration
      summary: Get brand configuration
      description: Get the branding configuration
      operationId: getBrandConfig
      security: []
      responses:
        '200':
          description: Brand configuration
          content:
            application/json:
              schema:
                type: object
                properties:
                  company_name:
                    type: string
                  logo_url:
                    type: string
                    nullable: true
                  primary_color:
                    type: string

  # Network Configuration Endpoints
  /api/network/interfaces:
    get:
      tags:
        - Network
      summary: Get network interfaces
      description: Get available network interfaces
      operationId: getNetworkInterfaces
      security: []
      responses:
        '200':
          description: Network interfaces
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    ip_address:
                      type: string
                    mac_address:
                      type: string

  /api/network/config:
    get:
      tags:
        - Network
      summary: Get network config
      description: Get current network configuration
      operationId: getNetworkConfig
      security: []
      responses:
        '200':
          description: Network configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NetworkConfig'
    post:
      tags:
        - Network
      summary: Save network config
      description: Save network configuration
      operationId: saveNetworkConfig
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NetworkConfig'
      responses:
        '200':
          description: Network configuration saved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # Setup Import Endpoint
  /api/setup/import:
    post:
      tags:
        - Configuration
      summary: Import data during setup
      description: Import data during initial setup wizard
      operationId: setupImport
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Data imported
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # Authentication Endpoints
  /api/auth/login:
    post:
      tags:
        - Authentication
      summary: Login
      description: Authenticate user and receive JWT token (also set as httpOnly cookie)
      operationId: login
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login successful
          headers:
            Set-Cookie:
              schema:
                type: string
              description: httpOnly cookie containing auth token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Account requires store/station assignment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Too many login attempts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout
      description: Invalidate session and clear auth cookie
      operationId: logout
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
        '401':
          description: Not authenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/auth/me:
    get:
      tags:
        - Authentication
      summary: Get current user
      description: Get the currently authenticated user's information
      operationId: getCurrentUser
      responses:
        '200':
          description: Current user information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '401':
          description: Not authenticated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # Fresh Install Endpoints
  /api/fresh-install/check:
    get:
      tags:
        - Fresh Install
      summary: Check fresh install status
      description: Check if this is a fresh installation
      operationId: checkFreshInstall
      security: []
      responses:
        '200':
          description: Fresh install status
          content:
            application/json:
              schema:
                type: object
                properties:
                  is_fresh_install:
                    type: boolean
                  database_empty:
                    type: boolean

  /api/fresh-install/upload-and-restore:
    post:
      tags:
        - Fresh Install
      summary: Upload and restore backup
      description: Upload a backup file and restore it during fresh install
      operationId: uploadAndRestore
      security: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Restore job started
          content:
            application/json:
              schema:
                type: object
                properties:
                  restore_job_id:
                    type: string

  /api/fresh-install/progress/{restore_job_id}:
    get:
      tags:
        - Fresh Install
      summary: Get restore progress
      description: Get the progress of a restore job
      operationId: getRestoreProgress
      security: []
      parameters:
        - name: restore_job_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Restore progress
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [pending, in_progress, completed, failed]
                  progress_percent:
                    type: integer
                  message:
                    type: string

  # Dashboard Stats Endpoints
  /api/stats/dashboard:
    get:
      tags:
        - Dashboard
      summary: Get dashboard stats
      description: Get dashboard statistics and metrics
      operationId: getDashboardStats
      responses:
        '200':
          description: Dashboard statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardStats'

  /api/stats/alerts:
    get:
      tags:
        - Dashboard
      summary: Get recent alerts
      description: Get recent system alerts
      operationId: getRecentAlerts
      responses:
        '200':
          description: Recent alerts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Alert'

  /api/stats/transactions:
    get:
      tags:
        - Dashboard
      summary: Get recent transactions
      description: Get recent transactions
      operationId: getRecentTransactions
      responses:
        '200':
          description: Recent transactions
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  # Inventory Endpoints
  /api/inventory/items:
    get:
      tags:
        - Inventory
      summary: Get inventory items
      description: Get inventory items with stock levels
      operationId: getInventoryItems
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: page_size
          in: query
          schema:
            type: integer
            default: 50
        - name: low_stock_only
          in: query
          schema:
            type: boolean
      responses:
        '200':
          description: Inventory items
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    product_id:
                      type: string
                    sku:
                      type: string
                    name:
                      type: string
                    quantity_on_hand:
                      type: number
                    reorder_point:
                      type: number
                    is_low_stock:
                      type: boolean

  # Product Endpoints
  /api/products:
    get:
      tags:
        - Products
      summary: List products
      description: Get a paginated list of products
      operationId: listProducts
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: page_size
          in: query
          schema:
            type: integer
            default: 50
            maximum: 100
        - name: category
          in: query
          schema:
            type: string
        - name: sort_by
          in: query
          schema:
            type: string
        - name: sort_order
          in: query
          schema:
            type: string
            enum: [asc, desc]
      responses:
        '200':
          description: List of products
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductSearchResponse'
    post:
      tags:
        - Products
      summary: Create product
      description: Create a new product
      operationId: createProduct
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProductRequest'
      responses:
        '201':
          description: Product created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrors'

  /api/products/{id}:
    get:
      tags:
        - Products
      summary: Get product
      description: Get a product by ID
      operationId: getProduct
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Products
      summary: Update product
      description: Update an existing product
      operationId: updateProduct
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProductRequest'
      responses:
        '200':
          description: Product updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Products
      summary: Delete product
      description: Soft delete a product
      operationId: deleteProduct
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Product deleted
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/products/search:
    post:
      tags:
        - Products
      summary: Search products
      description: Advanced product search with filters
      operationId: searchProducts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductSearchRequest'
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductSearchResponse'

  /api/products/bulk:
    post:
      tags:
        - Products
      summary: Bulk operations
      description: Perform bulk operations on products
      operationId: bulkOperations
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkOperationRequest'
      responses:
        '200':
          description: Bulk operation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  success_count:
                    type: integer
                  errors:
                    type: array
                    items:
                      type: object

  /api/products/categories:
    get:
      tags:
        - Products
      summary: Get categories
      description: Get all product categories from configuration
      operationId: getCategories
      responses:
        '200':
          description: Product categories
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    name:
                      type: string
                    attributes:
                      type: array
                      items:
                        type: object

  /api/products/autocomplete:
    get:
      tags:
        - Products
      summary: Autocomplete
      description: Get autocomplete suggestions for product search
      operationId: autocomplete
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
        - name: category
          in: query
          schema:
            type: string
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Autocomplete suggestions
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    name:
                      type: string
                    sku:
                      type: string

  /api/products/barcode/{barcode}:
    get:
      tags:
        - Products
      summary: Lookup by barcode
      description: Find a product by barcode
      operationId: lookupByBarcode
      parameters:
        - name: barcode
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/products/lookup/{query}:
    get:
      tags:
        - Products
      summary: Universal lookup
      description: Universal product lookup by SKU, barcode, or alternate SKUs
      operationId: universalLookup
      parameters:
        - name: query
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Lookup results
          content:
            application/json:
              schema:
                type: object
                properties:
                  query:
                    type: string
                  count:
                    type: integer
                  results:
                    type: array
                    items:
                      type: object

  /api/products/{id}/variants:
    get:
      tags:
        - Products
      summary: Get variants
      description: Get all variants for a product
      operationId: getVariants
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product variants
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      tags:
        - Products
      summary: Create variant
      description: Create a new product variant
      operationId: createVariant
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                variant_product:
                  $ref: '#/components/schemas/CreateProductRequest'
                variant_attributes:
                  type: object
                display_order:
                  type: integer
      responses:
        '201':
          description: Variant created
          content:
            application/json:
              schema:
                type: object

  /api/products/{id}/variants/{variant_id}:
    put:
      tags:
        - Products
      summary: Update variant
      description: Update a product variant
      operationId: updateVariant
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: variant_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Variant updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - Products
      summary: Delete variant
      description: Delete a product variant
      operationId: deleteVariant
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: variant_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Variant deleted

  /api/products/{id}/has-variants:
    get:
      tags:
        - Products
      summary: Check if has variants
      description: Check if a product has variants
      operationId: hasVariants
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Has variants check
          content:
            application/json:
              schema:
                type: object
                properties:
                  has_variants:
                    type: boolean

  /api/products/{id}/variant-count:
    get:
      tags:
        - Products
      summary: Get variant count
      description: Get the count of variants for a product
      operationId: getVariantCount
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Variant count
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer

  /api/products/{id}/relationships:
    get:
      tags:
        - Products
      summary: Get relationships
      description: Get product relationships (related, accessories, alternatives)
      operationId: getProductRelationships
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product relationships
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      tags:
        - Products
      summary: Create relationship
      description: Create a product relationship
      operationId: createProductRelationship
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                related_product_id:
                  type: string
                relationship_type:
                  type: string
                  enum: [related, accessory, alternative, bundle]
                display_order:
                  type: integer
              required:
                - related_product_id
                - relationship_type
      responses:
        '201':
          description: Relationship created
          content:
            application/json:
              schema:
                type: object

  /api/products/{id}/relationships/{relationship_id}:
    delete:
      tags:
        - Products
      summary: Delete relationship
      description: Delete a product relationship
      operationId: deleteProductRelationship
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: relationship_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Relationship deleted

  /api/products/{id}/price-history:
    get:
      tags:
        - Products
      summary: Get price history
      description: Get price change history for a product
      operationId: getPriceHistory
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Price history
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    old_price:
                      type: number
                    new_price:
                      type: number
                    changed_at:
                      type: string
                      format: date-time
                    changed_by:
                      type: string
                    reason:
                      type: string

  /api/products/templates:
    get:
      tags:
        - Products
      summary: List templates
      description: List product templates
      operationId: listTemplates
      responses:
        '200':
          description: Product templates
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      tags:
        - Products
      summary: Create template
      description: Create a product template
      operationId: createTemplate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                category:
                  type: string
                template_attributes:
                  type: object
                is_shared:
                  type: boolean
              required:
                - name
                - category
                - template_attributes
      responses:
        '201':
          description: Template created
          content:
            application/json:
              schema:
                type: object

  /api/products/templates/{id}:
    get:
      tags:
        - Products
      summary: Get template
      description: Get a product template by ID
      operationId: getTemplate
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product template
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - Products
      summary: Update template
      description: Update a product template
      operationId: updateTemplate
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Template updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - Products
      summary: Delete template
      description: Delete a product template
      operationId: deleteTemplate
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Template deleted

  # Customer Endpoints
  /api/customers:
    get:
      tags:
        - Customers
      summary: List customers
      description: Get a list of customers
      operationId: listCustomers
      parameters:
        - name: pricing_tier
          in: query
          schema:
            type: string
        - name: store_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of customers
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
    post:
      tags:
        - Customers
      summary: Create customer
      description: Create a new customer
      operationId: createCustomer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCustomerRequest'
      responses:
        '201':
          description: Customer created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'

  /api/customers/{id}:
    get:
      tags:
        - Customers
      summary: Get customer
      description: Get a customer by ID
      operationId: getCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '404':
          description: Customer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Customers
      summary: Update customer
      description: Update an existing customer
      operationId: updateCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCustomerRequest'
      responses:
        '200':
          description: Customer updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
    delete:
      tags:
        - Customers
      summary: Delete customer
      description: Delete a customer
      operationId: deleteCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Customer deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # User Endpoints
  /api/users/first-admin:
    post:
      tags:
        - Users
      summary: Create first admin
      description: Create the first admin user (fresh install only)
      operationId: createFirstAdmin
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        '201':
          description: Admin user created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          description: Admin already exists or validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/users:
    get:
      tags:
        - Users
      summary: List users
      description: Get a list of users (requires manage_settings permission)
      operationId: listUsers
      responses:
        '200':
          description: List of users
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserResponse'
    post:
      tags:
        - Users
      summary: Create user
      description: Create a new user (requires manage_settings permission)
      operationId: createUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        '201':
          description: User created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrors'

  /api/users/{id}:
    get:
      tags:
        - Users
      summary: Get user
      description: Get a user by ID (requires manage_settings permission)
      operationId: getUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Users
      summary: Update user
      description: Update an existing user (requires manage_settings permission)
      operationId: updateUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
    delete:
      tags:
        - Users
      summary: Delete user
      description: Delete a user (requires manage_settings permission)
      operationId: deleteUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/admin/users:
    get:
      tags:
        - Users
      summary: List users (admin)
      description: Get a list of users (admin endpoint)
      operationId: listUsersAdmin
      responses:
        '200':
          description: List of users
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserResponse'

  # Layaway Endpoints
  /api/layaways:
    get:
      tags:
        - Layaway
      summary: List layaways
      description: Get a list of layaways
      operationId: listLayaways
      parameters:
        - name: customer_id
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
            enum: [active, completed, cancelled, overdue]
        - name: store_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of layaways
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Layaway'
    post:
      tags:
        - Layaway
      summary: Create layaway
      description: Create a new layaway
      operationId: createLayaway
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLayawayRequest'
      responses:
        '201':
          description: Layaway created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Layaway'

  /api/layaways/{id}:
    get:
      tags:
        - Layaway
      summary: Get layaway
      description: Get a layaway by ID with items and payments
      operationId: getLayaway
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Layaway details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Layaway'
        '404':
          description: Layaway not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/layaways/{id}/payments:
    post:
      tags:
        - Layaway
      summary: Record payment
      description: Record a payment on a layaway
      operationId: recordLayawayPayment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLayawayPaymentRequest'
      responses:
        '200':
          description: Payment recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Layaway'

  /api/layaways/{id}/complete:
    post:
      tags:
        - Layaway
      summary: Complete layaway
      description: Mark a layaway as completed
      operationId: completeLayaway
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Layaway completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Layaway'

  /api/layaways/{id}/cancel:
    post:
      tags:
        - Layaway
      summary: Cancel layaway
      description: Cancel a layaway
      operationId: cancelLayaway
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Layaway cancelled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Layaway'

  /api/layaways/overdue/check:
    get:
      tags:
        - Layaway
      summary: Check overdue
      description: Check and flag overdue layaways
      operationId: checkOverdueLayaways
      responses:
        '200':
          description: Overdue check result
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                  message:
                    type: string

  /api/layaways/overdue:
    get:
      tags:
        - Layaway
      summary: Get overdue layaways
      description: Get all overdue layaways
      operationId: getOverdueLayaways
      responses:
        '200':
          description: Overdue layaways
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Layaway'

  # Work Order Endpoints
  /api/work-orders:
    get:
      tags:
        - Work Orders
      summary: List work orders
      description: Get a list of work orders
      operationId: listWorkOrders
      parameters:
        - name: customer_id
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, in_progress, completed, cancelled]
      responses:
        '200':
          description: List of work orders
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorkOrder'
    post:
      tags:
        - Work Orders
      summary: Create work order
      description: Create a new work order
      operationId: createWorkOrder
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWorkOrderRequest'
      responses:
        '201':
          description: Work order created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkOrder'

  /api/work-orders/{id}:
    get:
      tags:
        - Work Orders
      summary: Get work order
      description: Get a work order by ID
      operationId: getWorkOrder
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Work order details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkOrder'
    put:
      tags:
        - Work Orders
      summary: Update work order
      description: Update an existing work order
      operationId: updateWorkOrder
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Work order updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkOrder'

  /api/work-orders/{id}/lines:
    post:
      tags:
        - Work Orders
      summary: Add line
      description: Add a line item to a work order
      operationId: addWorkOrderLine
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                line_type:
                  type: string
                  enum: [labor, part, service]
                description:
                  type: string
                quantity:
                  type: number
                unit_price:
                  type: number
                product_id:
                  type: string
              required:
                - line_type
                - description
                - quantity
                - unit_price
      responses:
        '201':
          description: Line added
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkOrder'

  /api/work-orders/{id}/complete:
    post:
      tags:
        - Work Orders
      summary: Complete work order
      description: Mark a work order as completed
      operationId: completeWorkOrder
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Work order completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkOrder'

  # Commission Endpoints
  /api/commissions/rules:
    get:
      tags:
        - Commissions
      summary: List commission rules
      description: Get all commission rules
      operationId: listCommissionRules
      responses:
        '200':
          description: Commission rules
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      tags:
        - Commissions
      summary: Create commission rule
      description: Create a new commission rule
      operationId: createCommissionRule
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                rule_type:
                  type: string
                  enum: [percentage, fixed, tiered]
                value:
                  type: number
                category:
                  type: string
                employee_id:
                  type: string
              required:
                - name
                - rule_type
                - value
      responses:
        '201':
          description: Commission rule created
          content:
            application/json:
              schema:
                type: object

  /api/commissions/employees/{id}:
    get:
      tags:
        - Commissions
      summary: Get employee commissions
      description: Get commissions for an employee
      operationId: getEmployeeCommissions
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: start_date
          in: query
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Employee commissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  employee_id:
                    type: string
                  total_commission:
                    type: number
                  transactions:
                    type: array
                    items:
                      type: object

  /api/commissions/report:
    get:
      tags:
        - Commissions
      summary: Generate commission report
      description: Generate a commission report
      operationId: generateCommissionReport
      parameters:
        - name: start_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          required: true
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Commission report
          content:
            application/json:
              schema:
                type: object

  # Loyalty and Pricing Endpoints
  /api/loyalty/{customer_id}/balance:
    get:
      tags:
        - Loyalty
      summary: Get loyalty balance
      description: Get loyalty points balance for a customer
      operationId: getLoyaltyBalance
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Loyalty balance
          content:
            application/json:
              schema:
                type: object
                properties:
                  customer_id:
                    type: string
                  points:
                    type: integer
                  tier:
                    type: string

  /api/loyalty/{customer_id}/redeem:
    post:
      tags:
        - Loyalty
      summary: Redeem loyalty points
      description: Redeem loyalty points for a customer
      operationId: redeemLoyaltyPoints
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                points:
                  type: integer
                transaction_id:
                  type: string
              required:
                - points
      responses:
        '200':
          description: Points redeemed
          content:
            application/json:
              schema:
                type: object

  /api/loyalty/{customer_id}/adjust:
    post:
      tags:
        - Loyalty
      summary: Adjust loyalty points
      description: Adjust loyalty points for a customer
      operationId: adjustLoyaltyPoints
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                points:
                  type: integer
                reason:
                  type: string
              required:
                - points
      responses:
        '200':
          description: Points adjusted
          content:
            application/json:
              schema:
                type: object

  /api/price-levels:
    get:
      tags:
        - Loyalty
      summary: Get price levels
      description: Get all price levels
      operationId: getPriceLevels
      responses:
        '200':
          description: Price levels
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      tags:
        - Loyalty
      summary: Create price level
      description: Create a new price level
      operationId: createPriceLevel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                discount_percent:
                  type: number
              required:
                - name
      responses:
        '201':
          description: Price level created
          content:
            application/json:
              schema:
                type: object

  /api/store-credit/{customer_id}/balance:
    get:
      tags:
        - Credit
      summary: Get store credit balance
      description: Get store credit balance for a customer
      operationId: getStoreCreditBalance
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Store credit balance
          content:
            application/json:
              schema:
                type: object
                properties:
                  customer_id:
                    type: string
                  balance:
                    type: number

  /api/store-credit/{customer_id}/issue:
    post:
      tags:
        - Credit
      summary: Issue store credit
      description: Issue store credit to a customer
      operationId: issueStoreCredit
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                reason:
                  type: string
              required:
                - amount
      responses:
        '200':
          description: Store credit issued
          content:
            application/json:
              schema:
                type: object

  /api/store-credit/{customer_id}/redeem:
    post:
      tags:
        - Credit
      summary: Redeem store credit
      description: Redeem store credit for a customer
      operationId: redeemStoreCredit
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                transaction_id:
                  type: string
              required:
                - amount
      responses:
        '200':
          description: Store credit redeemed
          content:
            application/json:
              schema:
                type: object

  /api/customers/{customer_id}/pricing-tier:
    put:
      tags:
        - Loyalty
      summary: Adjust pricing tier
      description: Adjust pricing tier for a customer
      operationId: adjustPricingTier
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                tier:
                  type: string
                  enum: [retail, wholesale, vip, contractor]
              required:
                - tier
      responses:
        '200':
          description: Pricing tier adjusted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'

  # Credit Account Endpoints
  /api/credit-accounts:
    post:
      tags:
        - Credit
      summary: Create credit account
      description: Create a credit account for a customer
      operationId: createCreditAccount
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                customer_id:
                  type: string
                credit_limit:
                  type: number
              required:
                - customer_id
                - credit_limit
      responses:
        '201':
          description: Credit account created
          content:
            application/json:
              schema:
                type: object

  /api/credit-accounts/{id}:
    get:
      tags:
        - Credit
      summary: Get credit account
      description: Get a credit account by ID
      operationId: getCreditAccount
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Credit account details
          content:
            application/json:
              schema:
                type: object

  /api/credit-accounts/{id}/charges:
    post:
      tags:
        - Credit
      summary: Record charge
      description: Record a charge on a credit account
      operationId: recordCharge
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                description:
                  type: string
                transaction_id:
                  type: string
              required:
                - amount
      responses:
        '200':
          description: Charge recorded
          content:
            application/json:
              schema:
                type: object

  /api/credit-accounts/{id}/payments:
    post:
      tags:
        - Credit
      summary: Record payment
      description: Record a payment on a credit account
      operationId: recordCreditPayment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                payment_method:
                  type: string
              required:
                - amount
                - payment_method
      responses:
        '200':
          description: Payment recorded
          content:
            application/json:
              schema:
                type: object

  /api/credit-accounts/{id}/statement:
    get:
      tags:
        - Credit
      summary: Generate statement
      description: Generate a statement for a credit account
      operationId: generateStatement
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: start_date
          in: query
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Account statement
          content:
            application/json:
              schema:
                type: object

  /api/credit-accounts/aging:
    get:
      tags:
        - Credit
      summary: Get aging report
      description: Get aging report for all credit accounts
      operationId: getAgingReport
      responses:
        '200':
          description: Aging report
          content:
            application/json:
              schema:
                type: object

  /api/credit/check/{customer_id}:
    get:
      tags:
        - Credit
      summary: Check customer credit
      description: Check credit status for a customer
      operationId: checkCustomerCredit
      parameters:
        - name: customer_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Credit check result
          content:
            application/json:
              schema:
                type: object

  /api/credit/verify-offline:
    post:
      tags:
        - Credit
      summary: Verify offline transactions
      description: Verify offline credit transactions
      operationId: verifyOfflineTransactions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Verification result
          content:
            application/json:
              schema:
                type: object

  /api/credit/pending-verifications:
    get:
      tags:
        - Credit
      summary: Get pending verifications
      description: Get pending credit verifications
      operationId: getPendingVerifications
      responses:
        '200':
          description: Pending verifications
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  # Gift Card Endpoints
  /api/gift-cards:
    post:
      tags:
        - Gift Cards
      summary: Issue gift card
      description: Issue a new gift card
      operationId: issueGiftCard
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IssueGiftCardRequest'
      responses:
        '201':
          description: Gift card issued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GiftCard'

  /api/gift-cards/{code}/balance:
    get:
      tags:
        - Gift Cards
      summary: Check balance
      description: Check gift card balance
      operationId: checkGiftCardBalance
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Gift card balance
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                  balance:
                    type: number
                  status:
                    type: string

  /api/gift-cards/{code}/redeem:
    post:
      tags:
        - Gift Cards
      summary: Redeem gift card
      description: Redeem a gift card
      operationId: redeemGiftCard
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                transaction_id:
                  type: string
              required:
                - amount
      responses:
        '200':
          description: Gift card redeemed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GiftCard'

  /api/gift-cards/{code}/reload:
    post:
      tags:
        - Gift Cards
      summary: Reload gift card
      description: Reload a gift card
      operationId: reloadGiftCard
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
              required:
                - amount
      responses:
        '200':
          description: Gift card reloaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GiftCard'

  # Promotion Endpoints
  /api/promotions:
    get:
      tags:
        - Promotions
      summary: List promotions
      description: Get all promotions
      operationId: listPromotions
      responses:
        '200':
          description: List of promotions
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Promotion'
    post:
      tags:
        - Promotions
      summary: Create promotion
      description: Create a new promotion
      operationId: createPromotion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePromotionRequest'
      responses:
        '201':
          description: Promotion created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Promotion'

  /api/promotions/{id}:
    put:
      tags:
        - Promotions
      summary: Update promotion
      description: Update an existing promotion
      operationId: updatePromotion
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Promotion updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Promotion'

  /api/promotions/{id}/usage:
    get:
      tags:
        - Promotions
      summary: Get promotion usage
      description: Get usage statistics for a promotion
      operationId: getPromotionUsage
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Promotion usage
          content:
            application/json:
              schema:
                type: object
                properties:
                  promotion_id:
                    type: string
                  usage_count:
                    type: integer
                  total_discount:
                    type: number

  /api/promotions/evaluate:
    post:
      tags:
        - Promotions
      summary: Evaluate promotions
      description: Evaluate applicable promotions for a cart
      operationId: evaluatePromotions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
                customer_id:
                  type: string
      responses:
        '200':
          description: Applicable promotions
          content:
            application/json:
              schema:
                type: object

  /api/group-markdowns:
    get:
      tags:
        - Promotions
      summary: List group markdowns
      description: Get all group markdowns
      operationId: listGroupMarkdowns
      responses:
        '200':
          description: Group markdowns
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
    post:
      tags:
        - Promotions
      summary: Create group markdown
      description: Create a new group markdown
      operationId: createGroupMarkdown
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Group markdown created
          content:
            application/json:
              schema:
                type: object

  /api/group-markdowns/{id}:
    delete:
      tags:
        - Promotions
      summary: Deactivate group markdown
      description: Deactivate a group markdown
      operationId: deactivateGroupMarkdown
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Group markdown deactivated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # Store and Station Endpoints
  /api/stores:
    get:
      tags:
        - Stores
      summary: List stores
      description: Get all stores (requires manage_settings permission)
      operationId: listStores
      responses:
        '200':
          description: List of stores
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Store'
    post:
      tags:
        - Stores
      summary: Create store
      description: Create a new store (requires manage_settings permission)
      operationId: createStore
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStoreRequest'
      responses:
        '201':
          description: Store created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Store'

  /api/stores/{id}:
    get:
      tags:
        - Stores
      summary: Get store
      description: Get a store by ID (requires manage_settings permission)
      operationId: getStore
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Store details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Store'
    put:
      tags:
        - Stores
      summary: Update store
      description: Update an existing store (requires manage_settings permission)
      operationId: updateStore
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Store updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Store'
    delete:
      tags:
        - Stores
      summary: Delete store
      description: Delete a store (requires manage_settings permission)
      operationId: deleteStore
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Store deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/stations:
    get:
      tags:
        - Stores
      summary: List stations
      description: Get all stations (requires manage_settings permission)
      operationId: listStations
      responses:
        '200':
          description: List of stations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Station'
    post:
      tags:
        - Stores
      summary: Create station
      description: Create a new station (requires manage_settings permission)
      operationId: createStation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStationRequest'
      responses:
        '201':
          description: Station created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Station'

  /api/stations/{id}:
    get:
      tags:
        - Stores
      summary: Get station
      description: Get a station by ID (requires manage_settings permission)
      operationId: getStation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Station details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Station'
    put:
      tags:
        - Stores
      summary: Update station
      description: Update an existing station (requires manage_settings permission)
      operationId: updateStation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Station updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Station'
    delete:
      tags:
        - Stores
      summary: Delete station
      description: Delete a station (requires manage_settings permission)
      operationId: deleteStation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Station deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # Audit Log Endpoints
  /api/audit-logs:
    get:
      tags:
        - Audit
      summary: List audit logs
      description: Get audit logs (requires manage_settings permission)
      operationId: listAuditLogs
      parameters:
        - name: user_id
          in: query
          schema:
            type: string
        - name: action
          in: query
          schema:
            type: string
        - name: entity_type
          in: query
          schema:
            type: string
        - name: start_date
          in: query
          schema:
            type: string
            format: date-time
        - name: end_date
          in: query
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Audit logs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AuditLog'

  /api/audit-logs/export:
    get:
      tags:
        - Audit
      summary: Export audit logs
      description: Export audit logs (requires manage_settings permission)
      operationId: exportAuditLogs
      parameters:
        - name: format
          in: query
          schema:
            type: string
            enum: [csv, json]
            default: csv
      responses:
        '200':
          description: Exported audit logs
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

  /api/audit-logs/{id}:
    get:
      tags:
        - Audit
      summary: Get audit log
      description: Get an audit log by ID (requires manage_settings permission)
      operationId: getAuditLog
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Audit log details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuditLog'

  # Reporting Endpoints
  /api/reports/sales:
    get:
      tags:
        - Reporting
      summary: Sales report
      description: Get sales report
      operationId: getSalesReport
      parameters:
        - name: start_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: store_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Sales report
          content:
            application/json:
              schema:
                type: object

  /api/reports/sales/category:
    get:
      tags:
        - Reporting
      summary: Sales by category
      description: Get sales report by category
      operationId: getSalesByCategory
      parameters:
        - name: start_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          required: true
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Sales by category
          content:
            application/json:
              schema:
                type: object

  /api/reports/sales/employee:
    get:
      tags:
        - Reporting
      summary: Sales by employee
      description: Get sales report by employee
      operationId: getSalesByEmployee
      parameters:
        - name: start_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          required: true
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Sales by employee
          content:
            application/json:
              schema:
                type: object

  /api/reports/sales/tier:
    get:
      tags:
        - Reporting
      summary: Sales by tier
      description: Get sales report by pricing tier
      operationId: getSalesByTier
      parameters:
        - name: start_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          required: true
          schema:
            type: string
            format: date
      responses:
        '200':
          description: Sales by tier
          content:
            application/json:
              schema:
                type: object

  /api/reports/customers:
    get:
      tags:
        - Reporting
      summary: Customer report
      description: Get customer report
      operationId: getCustomerReport
      responses:
        '200':
          description: Customer report
          content:
            application/json:
              schema:
                type: object

  /api/reports/employees:
    get:
      tags:
        - Reporting
      summary: Employee report
      description: Get employee performance report
      operationId: getEmployeeReport
      responses:
        '200':
          description: Employee report
          content:
            application/json:
              schema:
                type: object

  /api/reports/layaways:
    get:
      tags:
        - Reporting
      summary: Layaway report
      description: Get layaway report
      operationId: getLayawayReport
      responses:
        '200':
          description: Layaway report
          content:
            application/json:
              schema:
                type: object

  /api/reports/work-orders:
    get:
      tags:
        - Reporting
      summary: Work order report
      description: Get work order report
      operationId: getWorkOrderReport
      responses:
        '200':
          description: Work order report
          content:
            application/json:
              schema:
                type: object

  /api/reports/promotions:
    get:
      tags:
        - Reporting
      summary: Promotion report
      description: Get promotion report
      operationId: getPromotionReport
      responses:
        '200':
          description: Promotion report
          content:
            application/json:
              schema:
                type: object

  /api/reports/dashboard:
    get:
      tags:
        - Reporting
      summary: Dashboard metrics
      description: Get dashboard metrics
      operationId: getDashboardMetrics
      responses:
        '200':
          description: Dashboard metrics
          content:
            application/json:
              schema:
                type: object

  /api/reports/export:
    post:
      tags:
        - Reporting
      summary: Export report
      description: Export a report (placeholder - functionality coming soon)
      operationId: exportReport
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                report_type:
                  type: string
                format:
                  type: string
                  enum: [csv, pdf, xlsx]
      responses:
        '200':
          description: Export result
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Export functionality coming soon

  # Sync Endpoints
  /api/sync/queue:
    post:
      tags:
        - Sync
      summary: Queue sync operation
      description: Queue a sync operation
      operationId: queueSyncOperation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                entity_type:
                  type: string
                entity_id:
                  type: string
                operation:
                  type: string
                  enum: [create, update, delete]
              required:
                - entity_type
                - entity_id
                - operation
      responses:
        '201':
          description: Sync operation queued
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SyncQueueItem'

  /api/sync/status:
    get:
      tags:
        - Sync
      summary: Get sync status
      description: Get overall sync status
      operationId: getSyncStatus
      responses:
        '200':
          description: Sync status
          content:
            application/json:
              schema:
                type: object
                properties:
                  last_sync:
                    type: string
                    format: date-time
                  pending_count:
                    type: integer
                  failed_count:
                    type: integer

  /api/sync/pending:
    get:
      tags:
        - Sync
      summary: Get pending sync items
      description: Get pending sync items
      operationId: getPendingSyncItems
      responses:
        '200':
          description: Pending sync items
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SyncQueueItem'

  /api/sync/{id}/complete:
    post:
      tags:
        - Sync
      summary: Mark sync completed
      description: Mark a sync operation as completed
      operationId: markSyncCompleted
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Sync marked as completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/sync/{id}/failed:
    post:
      tags:
        - Sync
      summary: Mark sync failed
      description: Mark a sync operation as failed
      operationId: markSyncFailed
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
      responses:
        '200':
          description: Sync marked as failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/sync/retry:
    post:
      tags:
        - Sync
      summary: Retry failed syncs
      description: Retry all failed sync operations
      operationId: retryFailedSyncs
      responses:
        '200':
          description: Retry initiated
          content:
            application/json:
              schema:
                type: object
                properties:
                  retried_count:
                    type: integer

  /api/sync/conflicts:
    get:
      tags:
        - Sync
      summary: Get sync conflicts
      description: Get all sync conflicts
      operationId: getSyncConflicts
      responses:
        '200':
          description: Sync conflicts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SyncConflict'

  /api/sync/conflicts/{id}/resolve:
    post:
      tags:
        - Sync
      summary: Resolve conflict
      description: Resolve a sync conflict
      operationId: resolveSyncConflict
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                resolution:
                  type: string
                  enum: [local_wins, remote_wins, merged]
                merged_data:
                  type: object
              required:
                - resolution
      responses:
        '200':
          description: Conflict resolved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/sync/audit-log:
    post:
      tags:
        - Sync
      summary: Create audit log
      description: Create a sync audit log entry
      operationId: createSyncAuditLog
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Audit log created
          content:
            application/json:
              schema:
                type: object

  /api/sync/audit-logs:
    get:
      tags:
        - Sync
      summary: Get sync audit logs
      description: Get sync audit logs
      operationId: getSyncAuditLogs
      responses:
        '200':
          description: Sync audit logs
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/sync/state:
    get:
      tags:
        - Sync
      summary: Get sync state
      description: Get current sync state
      operationId: getSyncState
      responses:
        '200':
          description: Sync state
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - Sync
      summary: Update sync state
      description: Update sync state
      operationId: updateSyncState
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Sync state updated
          content:
            application/json:
              schema:
                type: object

  # Conflict Resolution Endpoints
  /api/conflicts:
    get:
      tags:
        - Conflicts
      summary: List conflicts
      description: Get all conflicts
      operationId: listConflicts
      responses:
        '200':
          description: List of conflicts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SyncConflict'

  /api/conflicts/{id}:
    get:
      tags:
        - Conflicts
      summary: Get conflict
      description: Get a conflict by ID
      operationId: getConflict
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Conflict details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SyncConflict'

  /api/conflicts/{id}/resolve:
    post:
      tags:
        - Conflicts
      summary: Resolve conflict
      description: Resolve a conflict
      operationId: resolveConflict
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                resolution:
                  type: string
                merged_data:
                  type: object
      responses:
        '200':
          description: Conflict resolved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/conflicts/{id}/accept-local:
    post:
      tags:
        - Conflicts
      summary: Accept local version
      description: Accept the local version of a conflict
      operationId: acceptLocalVersion
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Local version accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/conflicts/{id}/accept-remote:
    post:
      tags:
        - Conflicts
      summary: Accept remote version
      description: Accept the remote version of a conflict
      operationId: acceptRemoteVersion
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Remote version accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/conflicts/stats:
    get:
      tags:
        - Conflicts
      summary: Get conflict stats
      description: Get conflict statistics
      operationId: getConflictStats
      responses:
        '200':
          description: Conflict statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                  pending:
                    type: integer
                  resolved:
                    type: integer

  # Alert Endpoints
  /api/alerts:
    get:
      tags:
        - Alerts
      summary: List alerts
      description: Get all alerts
      operationId: listAlerts
      parameters:
        - name: severity
          in: query
          schema:
            type: string
            enum: [info, warning, error, critical]
        - name: acknowledged
          in: query
          schema:
            type: boolean
      responses:
        '200':
          description: List of alerts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Alert'
    post:
      tags:
        - Alerts
      summary: Create alert
      description: Create a new alert
      operationId: createAlert
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                severity:
                  type: string
                  enum: [info, warning, error, critical]
                message:
                  type: string
              required:
                - type
                - severity
                - message
      responses:
        '201':
          description: Alert created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alert'

  /api/alerts/{id}:
    get:
      tags:
        - Alerts
      summary: Get alert
      description: Get an alert by ID
      operationId: getAlert
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Alert details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alert'

  /api/alerts/{id}/acknowledge:
    post:
      tags:
        - Alerts
      summary: Acknowledge alert
      description: Acknowledge an alert
      operationId: acknowledgeAlert
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Alert acknowledged
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alert'

  /api/alerts/stats:
    get:
      tags:
        - Alerts
      summary: Get alert stats
      description: Get alert statistics
      operationId: getAlertStats
      responses:
        '200':
          description: Alert statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                  unacknowledged:
                    type: integer
                  by_severity:
                    type: object

  /api/alerts/acknowledge-all:
    post:
      tags:
        - Alerts
      summary: Acknowledge all alerts
      description: Acknowledge all unacknowledged alerts
      operationId: acknowledgeAllAlerts
      responses:
        '200':
          description: All alerts acknowledged
          content:
            application/json:
              schema:
                type: object
                properties:
                  acknowledged_count:
                    type: integer

  # Barcode Endpoints
  /api/barcodes/generate:
    post:
      tags:
        - Barcodes
      summary: Generate barcode
      description: Generate a barcode
      operationId: generateBarcode
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  enum: [UPC-A, EAN-13, Code128, QR]
                value:
                  type: string
              required:
                - type
                - value
      responses:
        '200':
          description: Generated barcode
          content:
            application/json:
              schema:
                type: object
                properties:
                  barcode:
                    type: string
                  image:
                    type: string
                    format: base64

  /api/barcodes/validate:
    post:
      tags:
        - Barcodes
      summary: Validate barcode
      description: Validate a barcode
      operationId: validateBarcode
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                value:
                  type: string
              required:
                - type
                - value
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
                  message:
                    type: string

  /api/barcodes/products:
    get:
      tags:
        - Barcodes
      summary: Get products by barcode type
      description: Get products by barcode type
      operationId: getProductsByBarcodeType
      parameters:
        - name: type
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Products with barcode type
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'

  /api/barcodes/generate-bulk:
    post:
      tags:
        - Barcodes
      summary: Generate bulk barcodes
      description: Generate barcodes in bulk
      operationId: generateBarcodesBulk
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                count:
                  type: integer
                prefix:
                  type: string
              required:
                - type
                - count
      responses:
        '200':
          description: Generated barcodes
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/barcodes/types:
    get:
      tags:
        - Barcodes
      summary: Get barcode types
      description: Get supported barcode types
      operationId: getBarcodeTypes
      responses:
        '200':
          description: Barcode types
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    name:
                      type: string
                    description:
                      type: string

  # Health Check Endpoints (Authenticated)
  /api/health/connectivity:
    get:
      tags:
        - Health
      summary: Check all connectivity
      description: Check connectivity to all external services
      operationId: checkAllConnectivity
      responses:
        '200':
          description: Connectivity status
          content:
            application/json:
              schema:
                type: object
                properties:
                  woocommerce:
                    type: object
                  quickbooks:
                    type: object
                  google_drive:
                    type: object

  /api/health/connectivity/{platform}:
    get:
      tags:
        - Health
      summary: Check platform connectivity
      description: Check connectivity to a specific platform
      operationId: checkPlatformConnectivity
      parameters:
        - name: platform
          in: path
          required: true
          schema:
            type: string
            enum: [woocommerce, quickbooks, google_drive]
      responses:
        '200':
          description: Platform connectivity status
          content:
            application/json:
              schema:
                type: object
                properties:
                  connected:
                    type: boolean
                  last_check:
                    type: string
                    format: date-time
                  error:
                    type: string

  /api/health/cache:
    delete:
      tags:
        - Health
      summary: Clear health cache
      description: Clear the health check cache
      operationId: clearHealthCache
      responses:
        '200':
          description: Cache cleared
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/health/system:
    get:
      tags:
        - Health
      summary: Get system health
      description: Get system health status (public endpoint)
      operationId: getSystemHealth
      security: []
      responses:
        '200':
          description: System health
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  database:
                    type: string
                  uptime:
                    type: integer

  # Cache Endpoints
  /api/cache/tenant:
    delete:
      tags:
        - Settings
      summary: Clear tenant cache
      description: Clear the tenant configuration cache
      operationId: clearTenantCache
      responses:
        '200':
          description: Cache cleared
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # File Management Endpoints
  /api/files:
    get:
      tags:
        - Files
      summary: List files
      description: Get a list of uploaded files
      operationId: listFiles
      responses:
        '200':
          description: List of files
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    filename:
                      type: string
                    size:
                      type: integer
                    mime_type:
                      type: string
                    created_at:
                      type: string
                      format: date-time

  /api/files/{id}:
    get:
      tags:
        - Files
      summary: Get file
      description: Get file metadata
      operationId: getFile
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File metadata
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - Files
      summary: Delete file
      description: Delete a file
      operationId: deleteFile
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/files/{id}/download:
    get:
      tags:
        - Files
      summary: Download file
      description: Download a file
      operationId: downloadFile
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: File content
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

  /api/files/stats:
    get:
      tags:
        - Files
      summary: Get file stats
      description: Get file storage statistics
      operationId: getFileStats
      responses:
        '200':
          description: File statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_files:
                    type: integer
                  total_size:
                    type: integer

  # Unit Conversion Endpoints
  /api/units/convert:
    post:
      tags:
        - Units
      summary: Convert units
      description: Convert a value between units
      operationId: convertUnits
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                value:
                  type: number
                from_unit:
                  type: string
                to_unit:
                  type: string
              required:
                - value
                - from_unit
                - to_unit
      responses:
        '200':
          description: Conversion result
          content:
            application/json:
              schema:
                type: object
                properties:
                  value:
                    type: number
                  unit:
                    type: string

  /api/units/conversions:
    get:
      tags:
        - Units
      summary: Get conversions
      description: Get available unit conversions
      operationId: getConversions
      responses:
        '200':
          description: Available conversions
          content:
            application/json:
              schema:
                type: object

  /api/units/normalize:
    post:
      tags:
        - Units
      summary: Normalize quantity
      description: Normalize a quantity to base units
      operationId: normalizeQuantity
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                value:
                  type: number
                unit:
                  type: string
              required:
                - value
                - unit
      responses:
        '200':
          description: Normalized quantity
          content:
            application/json:
              schema:
                type: object

  /api/units/categories:
    get:
      tags:
        - Units
      summary: Get unit categories
      description: Get unit categories
      operationId: getUnitCategories
      responses:
        '200':
          description: Unit categories
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/units/batch-convert:
    post:
      tags:
        - Units
      summary: Batch convert
      description: Convert multiple values
      operationId: batchConvert
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  value:
                    type: number
                  from_unit:
                    type: string
                  to_unit:
                    type: string
      responses:
        '200':
          description: Batch conversion results
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  # Sync Configuration Endpoints
  /api/sync-config:
    get:
      tags:
        - Sync
      summary: Get sync config
      description: Get sync configuration
      operationId: getSyncConfig
      responses:
        '200':
          description: Sync configuration
          content:
            application/json:
              schema:
                type: object

  /api/sync-config/direction:
    put:
      tags:
        - Sync
      summary: Set sync direction
      description: Set sync direction for an entity type
      operationId: setSyncDirection
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                entity_type:
                  type: string
                direction:
                  type: string
                  enum: [pull, push, hybrid, manual]
              required:
                - entity_type
                - direction
      responses:
        '200':
          description: Sync direction set
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/sync-config/entity:
    put:
      tags:
        - Sync
      summary: Configure entity sync
      description: Configure sync settings for an entity type
      operationId: configureEntitySync
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Entity sync configured
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/sync-config/directions:
    get:
      tags:
        - Sync
      summary: Get sync directions
      description: Get all sync directions
      operationId: getSyncDirections
      responses:
        '200':
          description: Sync directions
          content:
            application/json:
              schema:
                type: object

  /api/sync-config/strategies:
    get:
      tags:
        - Sync
      summary: Get conflict strategies
      description: Get available conflict resolution strategies
      operationId: getConflictStrategies
      responses:
        '200':
          description: Conflict strategies
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/sync-config/test:
    post:
      tags:
        - Sync
      summary: Test sync config
      description: Test sync configuration
      operationId: testSyncConfig
      responses:
        '200':
          description: Test result
          content:
            application/json:
              schema:
                type: object

  /api/sync-config/stats:
    get:
      tags:
        - Sync
      summary: Get sync config stats
      description: Get sync configuration statistics
      operationId: getSyncConfigStats
      responses:
        '200':
          description: Sync config statistics
          content:
            application/json:
              schema:
                type: object

  # Sync Operations Endpoints
  /api/sync/trigger:
    post:
      tags:
        - Sync
      summary: Trigger sync
      description: Trigger a sync operation
      operationId: triggerSync
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                entity_type:
                  type: string
                platform:
                  type: string
      responses:
        '200':
          description: Sync triggered
          content:
            application/json:
              schema:
                type: object

  /api/sync/woocommerce/orders:
    post:
      tags:
        - Sync
      summary: Sync WooCommerce orders
      description: Sync orders from WooCommerce
      operationId: syncWooCommerceOrders
      responses:
        '200':
          description: Sync result
          content:
            application/json:
              schema:
                type: object

  /api/sync/woocommerce/products:
    post:
      tags:
        - Sync
      summary: Sync WooCommerce products
      description: Sync products from WooCommerce
      operationId: syncWooCommerceProducts
      responses:
        '200':
          description: Sync result
          content:
            application/json:
              schema:
                type: object

  /api/sync/woocommerce/customers:
    post:
      tags:
        - Sync
      summary: Sync WooCommerce customers
      description: Sync customers from WooCommerce
      operationId: syncWooCommerceCustomers
      responses:
        '200':
          description: Sync result
          content:
            application/json:
              schema:
                type: object

  /api/sync/status/list:
    get:
      tags:
        - Sync
      summary: List sync status
      description: List all sync status records
      operationId: listSyncStatusRecords
      responses:
        '200':
          description: Sync status list
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/sync/status/{id}:
    get:
      tags:
        - Sync
      summary: Get sync status by ID
      description: Get sync status by ID
      operationId: getSyncStatusById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Sync status
          content:
            application/json:
              schema:
                type: object

  /api/sync/retry-failed:
    post:
      tags:
        - Sync
      summary: Retry failed records
      description: Retry all failed sync records
      operationId: retryFailedRecords
      responses:
        '200':
          description: Retry result
          content:
            application/json:
              schema:
                type: object

  /api/sync/retry/{id}:
    post:
      tags:
        - Sync
      summary: Retry single failure
      description: Retry a single failed sync record
      operationId: retrySingleFailure
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Retry result
          content:
            application/json:
              schema:
                type: object

  /api/sync/failures:
    get:
      tags:
        - Sync
      summary: List failures
      description: List all sync failures
      operationId: listSyncFailures
      responses:
        '200':
          description: Sync failures
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/sync/confirmation-required:
    get:
      tags:
        - Sync
      summary: Check confirmation requirement
      description: Check if sync operation requires confirmation
      operationId: checkConfirmationRequirement
      responses:
        '200':
          description: Confirmation requirement
          content:
            application/json:
              schema:
                type: object

  /api/sync/execute-confirmed:
    post:
      tags:
        - Sync
      summary: Execute confirmed operation
      description: Execute a confirmed sync operation
      operationId: executeConfirmedOperation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Execution result
          content:
            application/json:
              schema:
                type: object

  /api/sync/circuit-breaker:
    get:
      tags:
        - Sync
      summary: Get circuit breaker status
      description: Get circuit breaker status for sync operations
      operationId: getCircuitBreakerStatus
      responses:
        '200':
          description: Circuit breaker status
          content:
            application/json:
              schema:
                type: object

  # Backup Endpoints
  /api/backups/overview:
    get:
      tags:
        - Backups
      summary: Get backup overview
      description: Get backup overview (requires manage_settings permission)
      operationId: getBackupOverview
      responses:
        '200':
          description: Backup overview
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_backups:
                    type: integer
                  last_backup:
                    type: string
                    format: date-time
                  total_size:
                    type: integer
                  next_scheduled:
                    type: string
                    format: date-time

  /api/backups:
    get:
      tags:
        - Backups
      summary: List backups
      description: Get all backups (requires manage_settings permission)
      operationId: listBackups
      responses:
        '200':
          description: List of backups
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Backup'
    post:
      tags:
        - Backups
      summary: Create backup
      description: Create a new backup (requires manage_settings permission)
      operationId: createBackup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                backup_type:
                  type: string
                  enum: [full, incremental, differential]
                description:
                  type: string
      responses:
        '201':
          description: Backup created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Backup'

  /api/backups/settings:
    get:
      tags:
        - Backups
      summary: Get backup settings
      description: Get backup settings (requires manage_settings permission)
      operationId: getBackupSettings
      responses:
        '200':
          description: Backup settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupSettings'
    put:
      tags:
        - Backups
      summary: Update backup settings
      description: Update backup settings (requires manage_settings permission)
      operationId: updateBackupSettings
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BackupSettings'
      responses:
        '200':
          description: Settings updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupSettings'

  /api/backups/retention/enforce:
    post:
      tags:
        - Backups
      summary: Enforce retention
      description: Enforce backup retention policy (requires manage_settings permission)
      operationId: enforceRetention
      responses:
        '200':
          description: Retention enforced
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted_count:
                    type: integer

  /api/backups/{id}:
    get:
      tags:
        - Backups
      summary: Get backup
      description: Get a backup by ID (requires manage_settings permission)
      operationId: getBackup
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Backup details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Backup'
    delete:
      tags:
        - Backups
      summary: Delete backup
      description: Delete a backup (requires manage_settings permission)
      operationId: deleteBackup
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Backup deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/backups/{id}/restore:
    post:
      tags:
        - Backups
      summary: Restore backup
      description: Restore from a backup (requires manage_settings permission)
      operationId: restoreBackup
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Restore initiated
          content:
            application/json:
              schema:
                type: object
                properties:
                  restore_job_id:
                    type: string

  /api/backups/restore-jobs:
    get:
      tags:
        - Backups
      summary: List restore jobs
      description: List all restore jobs (requires manage_settings permission)
      operationId: listRestoreJobs
      responses:
        '200':
          description: Restore jobs
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/backups/restore-jobs/{id}:
    get:
      tags:
        - Backups
      summary: Get restore job
      description: Get a restore job by ID (requires manage_settings permission)
      operationId: getRestoreJob
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Restore job details
          content:
            application/json:
              schema:
                type: object

  /api/backups/restore-jobs/{id}/rollback-instructions:
    get:
      tags:
        - Backups
      summary: Get rollback instructions
      description: Get rollback instructions for a restore job (requires manage_settings permission)
      operationId: getRollbackInstructions
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Rollback instructions
          content:
            application/json:
              schema:
                type: object

  /api/backups/{id}/download-token:
    post:
      tags:
        - Backups
      summary: Generate download token
      description: Generate a download token for a backup (requires manage_settings permission)
      operationId: generateDownloadToken
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Download token
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                  expires_at:
                    type: string
                    format: date-time

  /api/backups/download:
    get:
      tags:
        - Backups
      summary: Download with token
      description: Download a backup using a token
      operationId: downloadWithToken
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Backup file
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary

  /api/backups/download-tokens/cleanup:
    delete:
      tags:
        - Backups
      summary: Cleanup expired tokens
      description: Cleanup expired download tokens (requires manage_settings permission)
      operationId: cleanupExpiredTokens
      responses:
        '200':
          description: Tokens cleaned up
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted_count:
                    type: integer

  # Google Drive OAuth Endpoints
  /api/google-drive/connect:
    post:
      tags:
        - Google Drive
      summary: Connect Google Drive
      description: Initiate Google Drive OAuth connection (requires manage_settings permission)
      operationId: connectGoogleDrive
      responses:
        '200':
          description: OAuth URL
          content:
            application/json:
              schema:
                type: object
                properties:
                  auth_url:
                    type: string

  /api/google-drive/callback:
    get:
      tags:
        - Google Drive
      summary: OAuth callback
      description: Handle Google Drive OAuth callback
      operationId: googleDriveCallback
      parameters:
        - name: code
          in: query
          required: true
          schema:
            type: string
        - name: state
          in: query
          schema:
            type: string
      responses:
        '200':
          description: OAuth completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/google-drive/status:
    get:
      tags:
        - Google Drive
      summary: Get Google Drive status
      description: Get Google Drive connection status (requires manage_settings permission)
      operationId: getGoogleDriveStatus
      responses:
        '200':
          description: Connection status
          content:
            application/json:
              schema:
                type: object
                properties:
                  connected:
                    type: boolean
                  email:
                    type: string
                  folder_id:
                    type: string

  /api/google-drive/disconnect:
    delete:
      tags:
        - Google Drive
      summary: Disconnect Google Drive
      description: Disconnect Google Drive (requires manage_settings permission)
      operationId: disconnectGoogleDrive
      responses:
        '200':
          description: Disconnected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # Feature Flags Endpoints
  /api/feature-flags:
    get:
      tags:
        - Feature Flags
      summary: Get feature flags
      description: Get all feature flags (requires manage_settings permission)
      operationId: getFeatureFlags
      responses:
        '200':
          description: Feature flags
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: boolean

  /api/feature-flags/{name}:
    put:
      tags:
        - Feature Flags
      summary: Update feature flag
      description: Update a feature flag (requires manage_settings permission)
      operationId: updateFeatureFlag
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                enabled:
                  type: boolean
              required:
                - enabled
      responses:
        '200':
          description: Feature flag updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  # Config Management Endpoints
  /api/config/tenants:
    get:
      tags:
        - Configuration
      summary: List tenants
      description: List all tenants (requires manage_settings permission)
      operationId: listTenants
      responses:
        '200':
          description: List of tenants
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/config/tenants/{tenant_id}:
    get:
      tags:
        - Configuration
      summary: Get tenant config
      description: Get tenant configuration (requires manage_settings permission)
      operationId: getTenantConfig
      parameters:
        - name: tenant_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Tenant configuration
          content:
            application/json:
              schema:
                type: object

  /api/config/reload:
    post:
      tags:
        - Configuration
      summary: Reload config
      description: Reload configuration from disk (requires manage_settings permission)
      operationId: reloadConfig
      responses:
        '200':
          description: Config reloaded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/config/validate:
    post:
      tags:
        - Configuration
      summary: Validate config
      description: Validate a configuration (requires manage_settings permission)
      operationId: validateConfig
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
                  errors:
                    type: array
                    items:
                      type: string

  /api/config/schema:
    get:
      tags:
        - Configuration
      summary: Get config schema
      description: Get configuration JSON schema (requires manage_settings permission)
      operationId: getConfigSchema
      responses:
        '200':
          description: Config schema
          content:
            application/json:
              schema:
                type: object

  # WooCommerce Integration Endpoints
  /api/woocommerce/products/lookup:
    get:
      tags:
        - WooCommerce
      summary: Lookup product
      description: Lookup a product in WooCommerce
      operationId: lookupWooCommerceProduct
      parameters:
        - name: sku
          in: query
          schema:
            type: string
        - name: id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Product found
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/customers/lookup:
    get:
      tags:
        - WooCommerce
      summary: Lookup customer
      description: Lookup a customer in WooCommerce
      operationId: lookupWooCommerceCustomer
      parameters:
        - name: email
          in: query
          schema:
            type: string
        - name: id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Customer found
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/test:
    get:
      tags:
        - WooCommerce
      summary: Test connection
      description: Test WooCommerce connection
      operationId: testWooCommerceConnection
      responses:
        '200':
          description: Connection status
          content:
            application/json:
              schema:
                type: object
                properties:
                  connected:
                    type: boolean
                  store_name:
                    type: string
                  version:
                    type: string

  /api/woocommerce/orders/export-all:
    get:
      tags:
        - WooCommerce
      summary: Export all orders
      description: Export all orders from WooCommerce
      operationId: exportAllWooCommerceOrders
      responses:
        '200':
          description: Orders exported
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/woocommerce/products/export-all:
    get:
      tags:
        - WooCommerce
      summary: Export all products
      description: Export all products from WooCommerce
      operationId: exportAllWooCommerceProducts
      responses:
        '200':
          description: Products exported
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/woocommerce/customers/export-all:
    get:
      tags:
        - WooCommerce
      summary: Export all customers
      description: Export all customers from WooCommerce
      operationId: exportAllWooCommerceCustomers
      responses:
        '200':
          description: Customers exported
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/woocommerce/orders/{id}:
    get:
      tags:
        - WooCommerce
      summary: Get order
      description: Get a WooCommerce order by ID
      operationId: getWooCommerceOrder
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Order details
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/products/{id}:
    get:
      tags:
        - WooCommerce
      summary: Get product
      description: Get a WooCommerce product by ID
      operationId: getWooCommerceProductById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product details
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/customers/{id}:
    get:
      tags:
        - WooCommerce
      summary: Get customer
      description: Get a WooCommerce customer by ID
      operationId: getWooCommerceCustomerById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/products/{id}/variations:
    get:
      tags:
        - WooCommerce
      summary: Get variations
      description: Get product variations from WooCommerce
      operationId: getWooCommerceVariations
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Product variations
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/woocommerce/products/{id}/variations/{variation_id}:
    get:
      tags:
        - WooCommerce
      summary: Get variation
      description: Get a specific product variation from WooCommerce
      operationId: getWooCommerceVariation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: variation_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Variation details
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/products:
    post:
      tags:
        - WooCommerce
      summary: Create product
      description: Create a product in WooCommerce
      operationId: createWooCommerceProduct
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Product created
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/customers:
    post:
      tags:
        - WooCommerce
      summary: Create customer
      description: Create a customer in WooCommerce
      operationId: createWooCommerceCustomer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Customer created
          content:
            application/json:
              schema:
                type: object

  /api/woocommerce/orders:
    post:
      tags:
        - WooCommerce
      summary: Create order
      description: Create an order in WooCommerce
      operationId: createWooCommerceOrder
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Order created
          content:
            application/json:
              schema:
                type: object

  # QuickBooks Integration Endpoints
  /api/quickbooks/customers/lookup:
    get:
      tags:
        - QuickBooks
      summary: Lookup customer
      description: Lookup a customer in QuickBooks
      operationId: lookupQuickBooksCustomer
      parameters:
        - name: email
          in: query
          schema:
            type: string
        - name: name
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Customer found
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/items/lookup:
    get:
      tags:
        - QuickBooks
      summary: Lookup item
      description: Lookup an item in QuickBooks
      operationId: lookupQuickBooksItem
      parameters:
        - name: sku
          in: query
          schema:
            type: string
        - name: name
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Item found
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/test:
    get:
      tags:
        - QuickBooks
      summary: Test connection
      description: Test QuickBooks connection
      operationId: testQuickBooksConnection
      responses:
        '200':
          description: Connection status
          content:
            application/json:
              schema:
                type: object
                properties:
                  connected:
                    type: boolean
                  company_name:
                    type: string

  /api/quickbooks/customers/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get customer
      description: Get a QuickBooks customer by ID
      operationId: getQuickBooksCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Customer details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update customer
      description: Update a QuickBooks customer
      operationId: updateQuickBooksCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Customer updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Deactivate customer
      description: Deactivate a QuickBooks customer
      operationId: deactivateQuickBooksCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Customer deactivated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/customers/query:
    get:
      tags:
        - QuickBooks
      summary: Query customers by name
      description: Query QuickBooks customers by name
      operationId: queryQuickBooksCustomersByName
      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Matching customers
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/quickbooks/items/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get item
      description: Get a QuickBooks item by ID
      operationId: getQuickBooksItem
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Item details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update item
      description: Update a QuickBooks item
      operationId: updateQuickBooksItem
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Item updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Deactivate item
      description: Deactivate a QuickBooks item
      operationId: deactivateQuickBooksItem
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Item deactivated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/items/query:
    get:
      tags:
        - QuickBooks
      summary: Query items by name
      description: Query QuickBooks items by name
      operationId: queryQuickBooksItemsByName
      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Matching items
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/quickbooks/transform/customer:
    post:
      tags:
        - QuickBooks
      summary: Transform customer
      description: Transform a customer to QuickBooks format
      operationId: transformCustomerToQuickBooks
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Transformed customer
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/transform/product:
    post:
      tags:
        - QuickBooks
      summary: Transform product
      description: Transform a product to QuickBooks format
      operationId: transformProductToQuickBooks
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Transformed product
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/transform/order:
    post:
      tags:
        - QuickBooks
      summary: Transform order
      description: Transform an order to QuickBooks format
      operationId: transformOrderToQuickBooks
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Transformed order
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/transaction-type:
    get:
      tags:
        - QuickBooks
      summary: Check transaction type
      description: Check the appropriate QuickBooks transaction type
      operationId: checkTransactionType
      parameters:
        - name: order_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Transaction type
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    enum: [invoice, sales_receipt]

  # QuickBooks Invoice Endpoints
  /api/quickbooks/invoices/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get invoice
      description: Get a QuickBooks invoice by ID
      operationId: getQuickBooksInvoice
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Invoice details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update invoice
      description: Update a QuickBooks invoice
      operationId: updateQuickBooksInvoice
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Invoice updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Delete invoice
      description: Delete a QuickBooks invoice
      operationId: deleteQuickBooksInvoice
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Invoice deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/invoices/query:
    get:
      tags:
        - QuickBooks
      summary: Query invoices
      description: Query QuickBooks invoices
      operationId: queryQuickBooksInvoices
      parameters:
        - name: customer_id
          in: query
          schema:
            type: string
        - name: doc_number
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Matching invoices
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/quickbooks/invoices:
    post:
      tags:
        - QuickBooks
      summary: Create invoice
      description: Create a QuickBooks invoice
      operationId: createQuickBooksInvoice
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Invoice created
          content:
            application/json:
              schema:
                type: object

  # QuickBooks Sales Receipt Endpoints
  /api/quickbooks/sales-receipts/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get sales receipt
      description: Get a QuickBooks sales receipt by ID
      operationId: getQuickBooksSalesReceipt
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Sales receipt details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update sales receipt
      description: Update a QuickBooks sales receipt
      operationId: updateQuickBooksSalesReceipt
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Sales receipt updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Void sales receipt
      description: Void a QuickBooks sales receipt
      operationId: voidQuickBooksSalesReceipt
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Sales receipt voided
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/sales-receipts:
    post:
      tags:
        - QuickBooks
      summary: Create sales receipt
      description: Create a QuickBooks sales receipt
      operationId: createQuickBooksSalesReceipt
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Sales receipt created
          content:
            application/json:
              schema:
                type: object

  # QuickBooks Payment Endpoints
  /api/quickbooks/payments/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get payment
      description: Get a QuickBooks payment by ID
      operationId: getQuickBooksPayment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Payment details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update payment
      description: Update a QuickBooks payment
      operationId: updateQuickBooksPayment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Payment updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Delete payment
      description: Delete a QuickBooks payment
      operationId: deleteQuickBooksPayment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Payment deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/payments/query:
    get:
      tags:
        - QuickBooks
      summary: Query payments
      description: Query QuickBooks payments
      operationId: queryQuickBooksPayments
      parameters:
        - name: customer_id
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Matching payments
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/quickbooks/payments:
    post:
      tags:
        - QuickBooks
      summary: Create payment
      description: Create a QuickBooks payment
      operationId: createQuickBooksPayment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Payment created
          content:
            application/json:
              schema:
                type: object

  # QuickBooks Vendor Endpoints
  /api/quickbooks/vendors/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get vendor
      description: Get a QuickBooks vendor by ID
      operationId: getQuickBooksVendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Vendor details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update vendor
      description: Update a QuickBooks vendor
      operationId: updateQuickBooksVendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Vendor updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Deactivate vendor
      description: Deactivate a QuickBooks vendor
      operationId: deactivateQuickBooksVendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Vendor deactivated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/vendors/query:
    get:
      tags:
        - QuickBooks
      summary: Query vendors
      description: Query QuickBooks vendors by name
      operationId: queryQuickBooksVendors
      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Matching vendors
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/quickbooks/vendors/query-by-email:
    get:
      tags:
        - QuickBooks
      summary: Query vendors by email
      description: Query QuickBooks vendors by email
      operationId: queryQuickBooksVendorsByEmail
      parameters:
        - name: email
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Matching vendors
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/quickbooks/vendors:
    post:
      tags:
        - QuickBooks
      summary: Create vendor
      description: Create a QuickBooks vendor
      operationId: createQuickBooksVendor
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Vendor created
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/vendors/{id}/reactivate:
    post:
      tags:
        - QuickBooks
      summary: Reactivate vendor
      description: Reactivate a QuickBooks vendor
      operationId: reactivateQuickBooksVendor
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Vendor reactivated
          content:
            application/json:
              schema:
                type: object

  # QuickBooks Bill Endpoints
  /api/quickbooks/bills/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get bill
      description: Get a QuickBooks bill by ID
      operationId: getQuickBooksBill
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Bill details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update bill
      description: Update a QuickBooks bill
      operationId: updateQuickBooksBill
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Bill updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Delete bill
      description: Delete a QuickBooks bill
      operationId: deleteQuickBooksBill
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Bill deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/bills/by-vendor:
    get:
      tags:
        - QuickBooks
      summary: Query bills by vendor
      description: Query QuickBooks bills by vendor
      operationId: queryQuickBooksBillsByVendor
      parameters:
        - name: vendor_id
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Matching bills
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  /api/quickbooks/bills/by-doc-number:
    get:
      tags:
        - QuickBooks
      summary: Query bill by doc number
      description: Query QuickBooks bill by document number
      operationId: queryQuickBooksBillByDocNumber
      parameters:
        - name: doc_number
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Matching bill
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/bills:
    post:
      tags:
        - QuickBooks
      summary: Create bill
      description: Create a QuickBooks bill
      operationId: createQuickBooksBill
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Bill created
          content:
            application/json:
              schema:
                type: object

  # QuickBooks Refund Endpoints
  /api/quickbooks/credit-memos/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get credit memo
      description: Get a QuickBooks credit memo by ID
      operationId: getQuickBooksCreditMemo
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Credit memo details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update credit memo
      description: Update a QuickBooks credit memo
      operationId: updateQuickBooksCreditMemo
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Credit memo updated
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/credit-memos:
    post:
      tags:
        - QuickBooks
      summary: Create credit memo
      description: Create a QuickBooks credit memo
      operationId: createQuickBooksCreditMemo
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Credit memo created
          content:
            application/json:
              schema:
                type: object

  /api/quickbooks/refund-receipts/{id}:
    get:
      tags:
        - QuickBooks
      summary: Get refund receipt
      description: Get a QuickBooks refund receipt by ID
      operationId: getQuickBooksRefundReceipt
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Refund receipt details
          content:
            application/json:
              schema:
                type: object
    put:
      tags:
        - QuickBooks
      summary: Update refund receipt
      description: Update a QuickBooks refund receipt
      operationId: updateQuickBooksRefundReceipt
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Refund receipt updated
          content:
            application/json:
              schema:
                type: object
    delete:
      tags:
        - QuickBooks
      summary: Void refund receipt
      description: Void a QuickBooks refund receipt
      operationId: voidQuickBooksRefundReceipt
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Refund receipt voided
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/quickbooks/refund-receipts:
    post:
      tags:
        - QuickBooks
      summary: Create refund receipt
      description: Create a QuickBooks refund receipt
      operationId: createQuickBooksRefundReceipt
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '201':
          description: Refund receipt created
          content:
            application/json:
              schema:
                type: object

  # OAuth Management Endpoints
  /api/oauth/quickbooks/refresh:
    post:
      tags:
        - OAuth
      summary: Refresh QuickBooks token
      description: Refresh the QuickBooks OAuth token
      operationId: refreshQuickBooksToken
      responses:
        '200':
          description: Token refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  expires_at:
                    type: string
                    format: date-time

  /api/oauth/quickbooks/revoke:
    delete:
      tags:
        - OAuth
      summary: Revoke QuickBooks token
      description: Revoke the QuickBooks OAuth token
      operationId: revokeQuickBooksToken
      responses:
        '200':
          description: Token revoked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'

  /api/oauth/quickbooks/status:
    get:
      tags:
        - OAuth
      summary: Check token status
      description: Check the QuickBooks OAuth token status
      operationId: checkQuickBooksTokenStatus
      responses:
        '200':
          description: Token status
          content:
            application/json:
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
                  expires_at:
                    type: string
                    format: date-time
                  refresh_required:
                    type: boolean

  # Dev-only Endpoints (not available in production)
  /api/sync/dry-run:
    post:
      tags:
        - Sync
      summary: Execute dry run
      description: Execute a sync dry run (dev only - not available in production)
      operationId: executeDryRun
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Dry run result
          content:
            application/json:
              schema:
                type: object

  /api/settings/sandbox:
    get:
      tags:
        - Settings
      summary: Get sandbox status
      description: Get sandbox mode status (dev only - not available in production)
      operationId: getSandboxStatus
      responses:
        '200':
          description: Sandbox status
          content:
            application/json:
              schema:
                type: object
                properties:
                  enabled:
                    type: boolean
    put:
      tags:
        - Settings
      summary: Set sandbox mode
      description: Set sandbox mode (dev only - not available in production)
      operationId: setSandboxMode
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                enabled:
                  type: boolean
              required:
                - enabled
      responses:
        '200':
          description: Sandbox mode set
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'